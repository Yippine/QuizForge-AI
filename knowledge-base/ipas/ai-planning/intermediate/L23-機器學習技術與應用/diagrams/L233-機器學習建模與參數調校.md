# L233 - 機器學習建模與參數調校

## 架構說明

本章節涵蓋完整的機器學習建模流程，從數據準備到模型優化：
- **數據準備與特徵工程**：數據清洗、特徵選擇、特徵轉換
- **模型選擇與架構設計**：模型比較、架構設計、超參數空間
- **模型訓練、評估與驗證**：訓練策略、評估指標、交叉驗證
- **模型調整與優化**：超參數調整、正則化、集成學習

## Mermaid 架構圖

```mermaid
graph TD
    L233[L233 機器學習建模與參數調校]

    subgraph DataFE_Group[數據準備與特徵工程]
        L23301[L23301 數據準備與特徵工程]

        DataClean(數據清洗)
        FeatureSel(特徵選擇)
        FeatureTrans(特徵轉換)

        MissingValue(處理缺失值)
        Outlier(異常值處理)
        FilterMethod(過濾法)
        WrapperMethod(包裝法)
        Normalization(標準化/正規化)
        Encoding(編碼轉換)
    end

    subgraph ModelArch_Group[模型選擇與架構設計]
        L23302[L23302 模型選擇與架構設計]

        ModelCompare(模型比較)
        ArchDesign(架構設計)
        HyperParam(超參數空間定義)

        BaselineModel(基準模型)
        ComplexModel(複雜模型)
        LayerDesign(層次設計)
        ParamSpace(參數搜尋空間)
    end

    subgraph TrainEval_Group[模型訓練評估驗證]
        L23303[L23303 模型訓練評估驗證]

        TrainStrategy(訓練策略)
        EvalMetric(評估指標)
        CrossValid(交叉驗證)

        BatchTrain(批次訓練)
        EarlyStopping(早停法)
        Accuracy(準確率)
        Precision(精確率/召回率)
        KFold(K折交叉驗證)
    end

    subgraph Optimize_Group[模型調整與優化]
        L23304[L23304 模型調整與優化]

        HyperTune(超參數調整)
        Regularization(正則化)
        Ensemble(集成學習)

        GridSearch(網格搜尋)
        RandomSearch(隨機搜尋)
        L1L2(L1/L2正則化)
        Dropout(Dropout)
        Bagging(Bagging)
        Boosting(Boosting)
    end

    %% 章節層級
    L233 --> L23301
    L233 --> L23302
    L233 --> L23303
    L233 --> L23304

    %% 數據準備與特徵工程
    L23301 --> DataClean
    L23301 --> FeatureSel
    L23301 --> FeatureTrans

    DataClean --> MissingValue
    DataClean --> Outlier
    FeatureSel --> FilterMethod
    FeatureSel --> WrapperMethod
    FeatureTrans --> Normalization
    FeatureTrans --> Encoding

    %% 模型選擇與架構設計
    L23302 --> ModelCompare
    L23302 --> ArchDesign
    L23302 --> HyperParam

    ModelCompare --> BaselineModel
    ModelCompare --> ComplexModel
    ArchDesign --> LayerDesign
    HyperParam --> ParamSpace

    %% 模型訓練評估驗證
    L23303 --> TrainStrategy
    L23303 --> EvalMetric
    L23303 --> CrossValid

    TrainStrategy --> BatchTrain
    TrainStrategy --> EarlyStopping
    EvalMetric --> Accuracy
    EvalMetric --> Precision
    CrossValid --> KFold

    %% 模型調整與優化
    L23304 --> HyperTune
    L23304 --> Regularization
    L23304 --> Ensemble

    HyperTune --> GridSearch
    HyperTune --> RandomSearch
    Regularization --> L1L2
    Regularization --> Dropout
    Ensemble --> Bagging
    Ensemble --> Boosting

    %% 跨主題依賴：完整建模流程
    DataClean -.-> FeatureSel
    FeatureSel -.-> FeatureTrans
    FeatureTrans -.-> ModelCompare
    ModelCompare -.-> ArchDesign
    ArchDesign -.-> TrainStrategy
    TrainStrategy -.-> EvalMetric
    EvalMetric -.-> HyperTune
    CrossValid -.-> HyperTune
    HyperTune -.-> Regularization
    Regularization -.-> Ensemble

    %% 迭代優化回饋
    Ensemble -.-> FeatureSel
    EvalMetric -.-> DataClean

    %% 樣式定義
    classDef coreStyle fill:#e1f5ff,stroke:#0066cc,stroke-width:3px
    classDef supportStyle fill:#fff4e6,stroke:#ff9800,stroke-width:2px

    class L233,L23301,L23302,L23303,L23304 coreStyle
    class DataClean,FeatureSel,FeatureTrans,MissingValue,Outlier,FilterMethod,WrapperMethod,Normalization,Encoding,ModelCompare,ArchDesign,HyperParam,BaselineModel,ComplexModel,LayerDesign,ParamSpace,TrainStrategy,EvalMetric,CrossValid,BatchTrain,EarlyStopping,Accuracy,Precision,KFold,HyperTune,Regularization,Ensemble,GridSearch,RandomSearch,L1L2,Dropout,Bagging,Boosting supportStyle
```

## 說明

### 核心概念

- **數據準備與特徵工程**：
  - 數據清洗：處理缺失值、異常值
  - 特徵選擇：過濾法、包裝法
  - 特徵轉換：標準化、正規化、編碼

- **模型選擇與架構設計**：
  - 從基準模型開始，逐步嘗試複雜模型
  - 設計模型架構（層次、節點數）
  - 定義超參數搜尋空間

- **模型訓練評估驗證**：
  - 訓練策略：批次訓練、早停法
  - 評估指標：準確率、精確率、召回率、F1-score
  - 交叉驗證：K折交叉驗證避免過擬合

- **模型調整與優化**：
  - 超參數調整：網格搜尋、隨機搜尋、貝氏優化
  - 正則化：L1/L2、Dropout防止過擬合
  - 集成學習：Bagging、Boosting提升效能

### 關聯說明

- **層級關係（-->）**：章節 -> 主題 -> 方法的展開
- **依賴關係（-.->）**：完整的建模流程
  1. 數據清洗 -> 特徵選擇
  2. 特徵選擇 -> 特徵轉換
  3. 特徵轉換 -> 模型比較
  4. 模型比較 -> 架構設計
  5. 架構設計 -> 訓練策略
  6. 訓練策略 -> 評估指標
  7. 評估指標 -> 超參數調整
  8. 交叉驗證 -> 超參數調整
  9. 超參數調整 -> 正則化
  10. 正則化 -> 集成學習
- **迭代優化**：
  - 集成學習 -> 特徵選擇（重新選擇特徵）
  - 評估指標 -> 數據清洗（根據效果調整）

### 實施流程建議

1. **數據準備階段**（L23301）：
   - 清洗數據，處理缺失值和異常值
   - 選擇有效特徵
   - 進行必要的轉換（標準化、編碼）

2. **模型設計階段**（L23302）：
   - 建立基準模型（簡單模型）
   - 嘗試複雜模型
   - 設計架構和定義超參數空間

3. **訓練驗證階段**（L23303）：
   - 使用批次訓練和早停法
   - 計算評估指標
   - 進行交叉驗證

4. **優化階段**（L23304）：
   - 調整超參數（網格/隨機搜尋）
   - 應用正則化技術
   - 嘗試集成學習
   - 根據結果迭代改進
