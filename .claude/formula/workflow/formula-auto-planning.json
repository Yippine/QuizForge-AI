{
  "business_increment": "INC-002: Question Bank Data Loading & Management",
  "business_description": "實現題庫 JSON 數據載入機制，創建題目數據模型和狀態管理，實現按 Formula 主題和難度的數據過濾功能",
  "acceptance_criteria": [
    "成功載入 354 道題目的 JSON 數據",
    "實現 Pinia store 管理題庫狀態",
    "可按 Formula 主題篩選（L21101, L21102 等）",
    "可按難度篩選（simple, medium, hard）",
    "數據模型完整（question_id, topic, difficulty, options, answer, explanation 等）"
  ],
  "EngineeringStages": [
    "RequirementAnalysis",
    "ArchitectureDesign",
    "Implementation",
    "Testing"
  ],
  "current_stage_index": 1,
  "current_stage": "ArchitectureDesign + Implementation",
  "WorkflowFormula": "DependencySetup -> DataModelDefinition -> StateArchitecture -> FileOperations -> IntegrationValidation",
  "WorkflowFormula_detailed": "PiniaInstall × PiniaConfig -> QuestionModel -> (StoreState + StoreGetters + StoreActions) -> (JSONCopy + JSONLoad) -> ComponentIntegration -> FunctionalTest",
  "implementation_formula": "Pinia × QuestionBankStore × JSONAssets × FilterLogic",
  "implementation_formula_detailed": "(npm_install(pinia) -> main_js(createPinia)) × (defineStore(questionBank) -> {State(questions + filteredQuestions + currentFilters) + Getters(questionsByTopic + questionsByDifficulty + topicList + difficultyStats) + Actions(loadQuestions + filterByTopic + filterByDifficulty + resetFilters)}) × (knowledge_base/questions/*.json -> public/questions/*.json -> fetch(/questions/*.json)) × ((topic_filter: questions.filter(q => q.topic === topic)) & (difficulty_filter: questions.filter(q => q.difficulty === difficulty)))",
  "ExecutionGuide": {
    "overview": "實現 INC-002 需要完成 5 個核心步驟：安裝 Pinia 狀態管理、配置 Pinia 到 Vue 應用、複製 JSON 數據到 public 目錄、創建 questionBank store、實現數據載入和過濾邏輯",
    "steps": [
      {
        "step": 1,
        "name": "DependencySetup - Install Pinia",
        "formula": "npm_install(pinia) -> main_js(createPinia)",
        "actions": [
          "Execute: npm install pinia",
          "Import createPinia from 'pinia' in main.js",
          "Create Pinia instance: const pinia = createPinia()",
          "Register Pinia: app.use(pinia)",
          "Verify: npm list pinia should show installed version"
        ],
        "validation": "Pinia should be listed in package.json dependencies and main.js should contain app.use(pinia)"
      },
      {
        "step": 2,
        "name": "FileOperations - Copy JSON Data",
        "formula": "knowledge_base/questions/*.json -> public/questions/*.json",
        "actions": [
          "Create directory: public/questions/",
          "Copy: knowledge-base/ipas/4 questions/official-questions.json -> public/questions/official-questions.json",
          "Copy: knowledge-base/ipas/4 questions/L21-mock-exam.json -> public/questions/L21-mock-exam.json",
          "Copy: knowledge-base/ipas/4 questions/L23-mock-exam.json -> public/questions/L23-mock-exam.json",
          "Verify: All 3 JSON files should exist in public/questions/ directory"
        ],
        "validation": "public/questions/ should contain exactly 3 JSON files with total 354 questions"
      },
      {
        "step": 3,
        "name": "DataModelDefinition - Define Question Interface",
        "formula": "QuestionModel = {question_id + source + subject + chapter + topic + difficulty + question + options + answer + answer_text + explanation + keywords}",
        "actions": [
          "Create TypeScript interface or JSDoc comment for Question model",
          "Define all required fields based on actual JSON structure",
          "Document field types and constraints",
          "Note: This is for documentation and IDE support, no runtime validation needed for MVP"
        ],
        "validation": "Question model should match the structure in official-questions.json"
      },
      {
        "step": 4,
        "name": "StateArchitecture - Create QuestionBank Store",
        "formula": "defineStore(questionBank) -> {State + Getters + Actions}",
        "sub_steps": [
          {
            "name": "State Definition",
            "formula": "State = {questions: [] + filteredQuestions: [] + currentFilters: {topic: null, difficulty: null} + loading: false + error: null}",
            "code_location": "src/stores/questionBank.js",
            "implementation": "Define reactive state for all questions, filtered results, active filters, loading state, and error handling"
          },
          {
            "name": "Getters Definition",
            "formula": "Getters = {questionsByTopic(topic) + questionsByDifficulty(difficulty) + topicList() + difficultyStats()}",
            "implementation": [
              "questionsByTopic: return questions filtered by topic parameter",
              "questionsByDifficulty: return questions filtered by difficulty parameter",
              "topicList: extract unique topics from all questions",
              "difficultyStats: count questions per difficulty level"
            ]
          },
          {
            "name": "Actions Definition",
            "formula": "Actions = {loadQuestions(source?) + filterByTopic(topic) + filterByDifficulty(difficulty) + resetFilters()}",
            "implementation": [
              "loadQuestions: fetch JSON from /questions/ directory, merge into state.questions",
              "filterByTopic: set currentFilters.topic and update filteredQuestions",
              "filterByDifficulty: set currentFilters.difficulty and update filteredQuestions",
              "resetFilters: clear currentFilters and show all questions"
            ]
          }
        ],
        "validation": "Store should be importable and usable in Vue components with const store = useQuestionBankStore()"
      },
      {
        "step": 5,
        "name": "IntegrationValidation - Test Data Loading",
        "formula": "ComponentIntegration -> LoadTest -> FilterTest -> UIVerification",
        "actions": [
          "Create or update a component to use questionBank store",
          "Call store.loadQuestions() on component mount",
          "Verify state.questions contains 354 items",
          "Test filterByTopic with 'L21101' - should return matching questions",
          "Test filterByDifficulty with 'simple' - should return matching questions",
          "Test combined filters - should return questions matching both criteria",
          "Verify UI displays loaded questions correctly"
        ],
        "validation": "All 354 questions should load successfully and filtering should work correctly in browser DevTools"
      }
    ],
    "technical_architecture": {
      "file_structure": [
        "src/stores/questionBank.js - Pinia store definition",
        "src/main.js - Pinia plugin registration",
        "public/questions/official-questions.json - 100 questions",
        "public/questions/L21-mock-exam.json - 120 questions",
        "public/questions/L23-mock-exam.json - 134 questions"
      ],
      "data_flow": "JSON Files -> fetch API -> Store Actions -> Store State -> Store Getters -> Vue Components",
      "state_management": "Pinia centralized store with reactive state, computed getters, and async actions"
    },
    "quality_gates": [
      "Pinia must be properly installed and configured",
      "All 3 JSON files must be accessible via /questions/ path",
      "Store must successfully load all 354 questions",
      "Filtering by topic must return correct subset",
      "Filtering by difficulty must return correct subset",
      "Combined filters must work correctly (AND logic)",
      "No console errors during data loading"
    ]
  },
  "completion_status": "stage_complete",
  "stage_results": {
    "completed_stages": ["RequirementAnalysis", "ArchitectureDesign + Implementation (Planning)"],
    "current_progress": 0.75,
    "next_actions": ["Execute implementation following ExecutionGuide", "Run functional tests", "Validate against acceptance_criteria"]
  }
}
